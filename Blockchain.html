<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no" />
    <meta name="google-site-verification" content="VXixwtxrf--qUV1swfStEg9jOGPKgUm6C3Ub_vouqmc" />
    <title>MecBar | The Mec Evolution </title>
    <link rel="icon" href="foto/favicon.ico"/>
    <!-- CSS  -->
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
   -->
    <script src="js/jquery-3.1.1.min.js"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <link href="https://fonts.googleapis.com/css?family=Raleway|Satisfy" rel="stylesheet">
    <link href="css/style.css" type="text/css" rel="stylesheet" media="screen,projection" />
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script> 
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->

    <meta property="og:url" content="https://www.mecbar.com" />
    <meta property="og:title" content="MecBar the webt for you" />
    <meta property="og:image" content="https://www.mecbar.com/mecface.jpg" />
    <meta property="og:description" content="MecBar for you" />


</head>

<body>
    
    <nav>
        <li class="nav-wrapper back-home" id="head">
            <a href="http://www.mecbar.com/" class="aabrand-logo mecbar">
                <?xml version="1.0" encoding="UTF-8" standalone="no"?>
                <svg
                   xmlns:osb="http://www.openswatchbook.org/uri/2009/osb"
                   xmlns:dc="http://purl.org/dc/elements/1.1/"
                   xmlns:cc="http://creativecommons.org/ns#"
                   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
                   xmlns:svg="http://www.w3.org/2000/svg"
                   xmlns="http://www.w3.org/2000/svg"
                   xmlns:xlink="http://www.w3.org/1999/xlink"
                   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
                   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
                   width="156"
                   height="64"
                   viewBox="0 0 12.3825 5.08"
                   version="1.1"
                   id="svg8"
                   inkscape:version="1.0 (6e3e5246a0, 2020-05-07)"
                   sodipodi:docname="mecbar.svg">
                  <defs
                     id="defs2">
                    <linearGradient
                       osb:paint="solid"
                       id="linearGradient2948">
                      <stop
                         id="stop2946"
                         offset="0"
                         style="stop-color:#c6126a;stop-opacity:1;" />
                    </linearGradient>
                    <linearGradient
                       osb:paint="solid"
                       id="linearGradient875">
                      <stop
                         id="stop873"
                         offset="0"
                         style="stop-color:#babd06;stop-opacity:1;" />
                    </linearGradient>
                    <linearGradient
                       id="linearGradient3253"
                       osb:paint="solid">
                      <stop
                         style="stop-color:#878734;stop-opacity:1;"
                         offset="0"
                         id="stop3251" />
                    </linearGradient>
                    <linearGradient
                       inkscape:collect="always"
                       id="linearGradient3093">
                      <stop
                         style="stop-color:#c6126a;stop-opacity:1;"
                         offset="0"
                         id="stop3089" />
                      <stop
                         style="stop-color:#c6126a;stop-opacity:0;"
                         offset="1"
                         id="stop3091" />
                    </linearGradient>
                    <linearGradient
                       id="linearGradient3071"
                       osb:paint="solid">
                      <stop
                         style="stop-color:#c6126a;stop-opacity:1;"
                         offset="0"
                         id="stop3069" />
                    </linearGradient>
                    <rect
                       x="38.182308"
                       y="80.104469"
                       width="51.135052"
                       height="30.274338"
                       id="rect18630" />
                    <rect
                       x="160.31746"
                       y="77.487633"
                       width="134.35785"
                       height="60.829021"
                       id="rect18624" />
                    <rect
                       x="70.354279"
                       y="28.223705"
                       width="103.27115"
                       height="64.638908"
                       id="rect18618" />
                    <rect
                       x="32.55666"
                       y="25.199898"
                       width="5.2916665"
                       height="43.089287"
                       id="rect18612" />
                    <rect
                       x="34.029621"
                       y="65.792862"
                       width="93.441322"
                       height="26.673161"
                       id="rect18606" />
                    <rect
                       x="10.284417"
                       y="19.486744"
                       width="193.27823"
                       height="129.88597"
                       id="rect18596" />
                    <linearGradient
                       inkscape:collect="always"
                       xlink:href="#linearGradient3093"
                       id="linearGradient3101"
                       gradientUnits="userSpaceOnUse"
                       x1="3.1346149"
                       y1="23.792595"
                       x2="78.606865"
                       y2="23.792595" />
                    <filter
                       height="1"
                       y="-2.5183475e-16"
                       width="1"
                       x="-7.1910066e-17"
                       style="color-interpolation-filters:sRGB"
                       inkscape:label="Blend"
                       id="filter3198">
                      <feBlend
                         in2="SourceGraphic"
                         mode="multiply"
                         result="fbSourceGraphic"
                         id="feBlend3196" />
                      <feColorMatrix
                         result="fbSourceGraphicAlpha"
                         in="fbSourceGraphic"
                         values="0 0 0 -1 0 0 0 0 -1 0 0 0 0 -1 0 0 0 0 1 0"
                         id="feColorMatrix3200" />
                      <feBlend
                         in2="fbSourceGraphic"
                         id="feBlend3202"
                         mode="multiply"
                         result="blend"
                         in="fbSourceGraphic" />
                      <feGaussianBlur
                         id="feGaussianBlur869"
                         stdDeviation="6.7542215e-15" />
                    </filter>
                    <linearGradient
                       gradientUnits="userSpaceOnUse"
                       y2="9.1505461"
                       x2="228.5569"
                       y1="9.1505461"
                       x1="3.1346149"
                       id="linearGradient2950"
                       xlink:href="#linearGradient2948"
                       inkscape:collect="always" />
                    <linearGradient
                       y2="9.1505461"
                       x2="228.5569"
                       y1="9.1505461"
                       x1="3.1346149"
                       gradientTransform="translate(2.3455617,-9.683066)"
                       gradientUnits="userSpaceOnUse"
                       id="linearGradient3064"
                       xlink:href="#linearGradient2948"
                       inkscape:collect="always" />
                  </defs>
                  <sodipodi:namedview
                     id="base"
                     pagecolor="#ffffff"
                     bordercolor="#666666"
                     borderopacity="1.0"
                     inkscape:pageopacity="0.0"
                     inkscape:pageshadow="2"
                     inkscape:zoom="0.7"
                     inkscape:cx="355.19772"
                     inkscape:cy="45.714286"
                     inkscape:document-units="mm"
                     inkscape:current-layer="layer1-6"
                     inkscape:document-rotation="0"
                     showgrid="false"
                     inkscape:window-width="1324"
                     inkscape:window-height="747"
                     inkscape:window-x="36"
                     inkscape:window-y="21"
                     inkscape:window-maximized="1"
                     units="px"
                     inkscape:snap-nodes="true"
                     inkscape:object-paths="true"
                     scale-x="0.3" />
                  <metadata
                     id="metadata5">
                    <rdf:RDF>
                      <cc:Work
                         rdf:about="">
                        <dc:format>image/svg+xml</dc:format>
                        <dc:type
                           rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
                        <dc:title></dc:title>
                      </cc:Work>
                    </rdf:RDF>
                  </metadata>
                  <g
                     inkscape:label="Layer 1"
                     inkscape:groupmode="layer"
                     class="io"
                     id="layer1">
                    <rect
                       ry="7.1295023"
                       rx="10.726023"
                       y="-2.8428149"
                       x="-4.4855061"
                       height="21.245117"
                       width="20.103241"
                       id="rect2824"
                       style="opacity:0;fill:#c6126a;stroke:#babd06;stroke-width:0.0794996;stroke-opacity:0.00424254" />
                    <g
                       inkscape:label="Layer 1"
                       id="layer1-6"
                       transform="matrix(0.16152221,0.0020121,0,0.13626925,0.08059628,0.86541284)"
                       style="mix-blend-mode:normal;fill:url(#linearGradient2950);fill-opacity:1;stroke-width:6.74038;filter:url(#filter3198);image-rendering:optimizeQuality">
                      <text
                         xml:space="preserve"
                         id="text18594"
                         style="font-style:normal;font-weight:normal;font-size:10.5833px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;white-space:pre;shape-inside:url(#rect18596);fill:url(#linearGradient2950);fill-opacity:1;stroke:none;stroke-width:1.78339px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;" />
                      <text
                         xml:space="preserve"
                         style="font-style:oblique;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25.0978px;line-height:125%;font-family:Purisa;-inkscape-font-specification:'Purisa, Oblique';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;letter-spacing:0px;word-spacing:0px;fill:url(#linearGradient3064);fill-opacity:1;stroke:none;stroke-width:1.78339px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1"
                         x="-4.0898471"
                         y="24.876211"
                         id="text18602"
                         transform="matrix(0.75566848,-0.20637119,0.34609071,1.2288151,0,0)"><tspan
                   sodipodi:role="line"
                   id="tspan18600"
                   x="-4.0898471"
                   y="24.876211"
                   style="font-style:oblique;font-variant:normal;font-weight:normal;font-stretch:normal;font-size:25.0978px;font-family:Purisa;-inkscape-font-specification:'Purisa, Oblique';font-variant-ligatures:normal;font-variant-caps:normal;font-variant-numeric:normal;font-variant-east-asian:normal;fill:url(#linearGradient3064);fill-opacity:1;stroke-width:1.78339px">MecBar</tspan>        <animate
                   style="fill-opacity:1;fill:url(#linearGradient3064)"
                   begin="0s;light_2.end"
                   dur="1s"
                   values="1;0"
                   attributeName="fill-opacity"
                   id="light_1" />       <animate
                   style="fill-opacity:1;fill:url(#linearGradient3064)"
                   begin="light_1.end"
                   dur="1s"
                   values="0;1"
                   attributeName="fill-opacity"
                   id="light_2" />           </text>
                      <text
                         xml:space="preserve"
                         id="text18604"
                         style="font-style:normal;font-weight:normal;font-size:10.5833px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;white-space:pre;shape-inside:url(#rect18606);fill:url(#linearGradient2950);fill-opacity:1;stroke:none;stroke-width:1.78339px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;" />
                      <text
                         xml:space="preserve"
                         id="text18610"
                         style="font-style:normal;font-weight:normal;font-size:10.5833px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;white-space:pre;shape-inside:url(#rect18612);fill:url(#linearGradient2950);fill-opacity:1;stroke:none;stroke-width:1.78339px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;" />
                      <text
                         xml:space="preserve"
                         id="text18616"
                         style="font-style:normal;font-weight:normal;font-size:10.5833px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;white-space:pre;shape-inside:url(#rect18618);fill:url(#linearGradient2950);fill-opacity:1;stroke:none;stroke-width:1.78339px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;" />
                      <text
                         xml:space="preserve"
                         id="text18622"
                         style="font-style:normal;font-weight:normal;font-size:10.5833px;line-height:125%;font-family:sans-serif;letter-spacing:0px;word-spacing:0px;white-space:pre;shape-inside:url(#rect18624);fill:url(#linearGradient2950);fill-opacity:1;stroke:none;stroke-width:1.78339px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;" />
                      <text
                         xml:space="preserve"
                         id="text18628"
                         style="font-style:normal;font-weight:normal;font-size:12.7px;line-height:125%;font-family:sans-serif;text-align:justify;letter-spacing:0px;word-spacing:0px;white-space:pre;shape-inside:url(#rect18630);fill:url(#linearGradient2950);fill-opacity:1;stroke:none;stroke-width:1.78339px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1;" />
                      <animate
                         style="fill-opacity:1;fill:url(#linearGradient2950)"
                         begin="0s;light_2.end"
                         dur="1s"
                         values="1;0"
                         attributeName="fill-opacity"
                         id="light_1" />
                      <animate
                         style="fill-opacity:1;fill:url(#linearGradient2950)"
                         begin="light_1.end"
                         dur="1s"
                         values="0;1"
                         attributeName="fill-opacity"
                         id="light_2" />
                    </g>
                    <rect
                       ry="7.1295042"
                       rx="10.726021"
                       y="-2.8428149"
                       x="-4.4855061"
                       height="16.413473"
                       width="25.987757"
                       id="rect871"
                       style="opacity:0;fill:#c6126a;stroke:#babd06;stroke-width:0.0794996;stroke-opacity:0.00424254" />
                  </g>
                  <style
                     id="style43">
                           #tspan18600 {
                               
                              animation-name: mecOpacity;
                              animation-duration: 2s;
                              animation-iteration-count: infinite;
                              }
                              @keyframes mecOpacity {
                              0%   { fill-opacity:1 }
                                50%  {fill-opacity :0.1; }
                            100% { fill-opacity: 1; }
                              }
                        </style>
                </svg>
             
              </a>
            <a href="#" data-activates="mobile-demo" class="button-collapse"><i class="material-icons">menu</i></a>

            <ul class="right hide-on-med-and-down">
              <li><a href="http://www.mecbar.com/#block3">Blockchain</a></li>
                <li><a href="http://www.mecbar.com/#quantum">Quantum</a></li>
                <li><a href="http://www.mecbar.com/#ml">Machine Learning</a></li>
                <li><a href="http://www.mecbar.com/#Ablog">Blog</a></li>
                <li><a href="http://www.mecbar.com/#Adev">Develop</a></li>
                <li><a href="http://www.mecbar.com/#Alinux">Linux</a></li>
                <li><a href="http://www.mecbar.com/#Aus">Contatti</a></li>
                <li>
                    <a href=""> </a>
                </li>
                <li>
                    <a href=""> </a>
                </li>
            </ul>
            <ul class="side-nav" id="mobile-demo">
                <li><a href="#block3">Blockchain</a></li>
                <li><a href="#quantum">Quantum</a></li>
                <li><a href="#ml">Machine Learning</a></li>
                <li><a href="#Ablog">Blog</a></li> 
                <li>  <a href="#Adev">Develop</a></li>
                <li><a href="#Alinux">Linux</a></li>
                <li><a href="#Aus">Contatti</a></li>
            </ul>
            </li>
    </nav>
<style>
    @import url('https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900');

body {
   font-size: 23px;
   font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;

}

.titolo:hover {
 color:#f18300;
}

.elenco {
   display:flex;
   color : #fff;
   width: 100% ;
  align-items: center;
  justify-content:center;
} 
.elenco div {
   width: auto ;
 height: auto ;
 border : 2px solid #f18300;
 padding:5px;
 color: #fff;
background-color: red;
 margin:10px;
}
.elenco div:hover {
 color: red;
 background-color:#fff;
}
.elenco div a {
   color:rgb(0, 0, 0);
}

</style>
<div class="titolo">
  PILLOLE DI BLOCKCHAIN  -- GETH -- CONSOLE
</div>

<div class="elenco">
   <div><a href="#rpc">Connessione JSON-RPC</a></div>
   <div><a href="#web">Connessione WebSocket</a></div>
   <div><a href="#preload">Preload - eseguire script</a></div>
    <div><a href="#personal">Personal</a></div>
    <div><a href="#net">Net</a></div>
    <div><a href="#eth">Eth</a></div>

     <div><a href="#web3"> Web3</a> </div>
      <div> <a href="#db">  Db </a></div>
</div>
<div class="elenco">
  <div> <a href="#debug">  Debug</a> </div>
     <div> <a href="#admin">  Admin </a></div>
 <div> <a href="#miner">  Miner </a></div>
 <div><a href="#account">  Account </a></div>
   <div> <a href="#chi"> Chi ha minato un blocco</a> </div>
    <div> <a href="#txpool">  Txpool </a></div>
      <div>  <a href="#clique">Clique </a></div>
  <div> <a href="#sm">Smart Contract into Blockchain </a></div>
</div>
<div class="tot">
Per operare nella blockchain Ethereum tramite CLI si può utilizzare il programma GETH scritto in 
GO che ci permette di connettersi alle diverse reti Ethereum (Mainnet) e le reti di sviluppo come Rinkeby o 
Rospen o una rete privata.
Per vedere come creare una rete privata vedere la documentazione al seguente link <a href="http://www.mecbar.com/#swipe2">ETH PRIVATE NETWORK</a>
Una volta installato il pgm geth vediamo alcuni comandi utili per accedere alla console.
Con il comando seguente utilizziamo il formato di configurazione toml per salvare nel file di configurazione mainnet.toml che ci  permette di accedere alla rete 
MAINNET senza reinserire i parametri
</div>

<div class="boxxx">
geth dumpconfig > mainnet.toml  
oppure <br>
geth --datadir "./data" --networkid 25  dumpconfig >chain25.toml //salvo parametri della Private Network 25
<br>
geth --config  chain.toml  //nel file chain.toml ci sono parametri per attivare la chain 25
<br>

</div>
<div id="rpc"  class="tot">
Per comunicare con la rete privata possiamo utilizzare il protocollo JSON-RPC per comunicare 
la porta 8545 con http con i seguenti parametri :<br>
<br>
--rpc   //per abilitare json-rpc <br>
--rpcapi  //per abilitare di default eth, web3 e net<br>
--rpcaddr  "host"    //di default localhost<br>
--rpcport  "port"    //di default 8545<br>
--rpccorsdomain “*”<br>
<br>


questi comandi sono ora deprecati e si consiglia di usare al loro posto i seguenti comandi<br>
--http <br>  
--http.api="net,eth,web3,personal,admin,miner"<br>  
--http.port  8545 <br>  
--http.corsdomain '*'<br>  

vediamo un esempio: <br>
</div>

<div class="boxxx">

geth --http --http.addr localhost --http.api  --http.port   --identity "chain 25" --trace "./trace.txt"
</div>
<div id="preload" class="tot">
Nella console è possibile eseguire gli script Javascript indicando con il parametro 
--preload indicando dove trovare gli script 
</div>
<div class="boxxx">
geth --preload “./path dove sono scripts/file.js” console
<br>

geth --datadir "./data" --networkid 25 --port 30305 --ipcdisable --http --http.corsdomain '*' --http.api="net,eth,web3,personal,admin,miner" --http.port 8545 --verbosity "0" --preload "./js/primo.js" console 
</div>
<div class="tot">
Lo script primo.js è il seguente con una function:<br>
primo = function() {<br>
console.log('esempio command js in console geth')<br>
return "fatto"<br>
}<br>

ed una variabile <br>
<br>
secondo = "Hello, everybody";<br>
<br>

Ora vediamo il comando da terminal:<br>
</div>
<div class="boxxx">
geth --datadir "./data" --networkid 25 --port 30305 --ipcdisable --http --http.corsdomain '*' --http.api="net,eth,web3,personal,admin,miner" --http.port 8545 --verbosity "0" --preload "./js/primo.js" console 

</div> 
<div class="boxex">
Welcome to the Geth JavaScript console!
<br>
instance: Geth/v1.9.18-stable-f5382591/linux-amd64/go1.14.2<br>  
at block: 0 (Thu Jan 01 1970 01:00:00 GMT+0100 (CET))<br>  
 datadir: /home/mecbar/node1/data/data<br>  
 modules: admin:1.0 debug:1.0 eth:1.0 ethash:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0
 <br>
> primo()<br>
"fatto"<br><br>

> secondo<br>
"Hello, everybody"<br>
></div> 

<div class="tot">
Sotto in comando per aprire la console con altri parametri <br>  
si segnala in particolare --http.api="net,eth,web3,personal,admin,miner" che ci permette di eseguire le api indicate<br><br>
</div> 
<div class="boxxx">
geth --datadir "./data" --networkid 25 --port 30305 --ipcdisable --http --http.corsdomain '*' --http.api="net,eth,web3,personal,admin,miner" --http.port 8545 --exec "personal.listAccounts" console 
</div>
<div class="tot">
Vediamo per le classi principali l'elenco dei comandi e delle funzioni disponibili
</div>
<div id="personal" class="boxex">
> personal<br>
{<br>
  listAccounts: [],<br>
  listWallets: [],<br>
  deriveAccount: function(),<br>
  ecRecover: function(),<br>
  getListAccounts: function(callback),<br>
  getListWallets: function(callback),<br>
  importRawKey: function(),<br>
  initializeWallet: function(),<br>
  lockAccount: function(),<br>
  newAccount: function(),<br>
  openWallet: function(),<br>
  sendTransaction: function(),<br>
  sign: function(),<br>
  signTransaction: function(),<br>
  unlockAccount: function(),<br>
  unpair: function()<br>
}<br>
<br>


<b id="net">
> net</b><br>  
{<br>  
  listening: true,<br>  
  peerCount: 0,<br>  
  version: "25",<br>  
  getListening: function(callback),<br>  
  getPeerCount: function(callback),<br>  
  getVersion: function(callback)<br>  
}<br>  
<br>  
<b id="eth">
> eth </b><br>  

{<br>  
  accounts: [],<br>  
  blockNumber: 0,<br>  
  coinbase: undefined,<br>  
  compile: {<br>  
    lll: function(),<br>  
    serpent: function(),<br>  
    solidity: function()<br>  
  },<br>  
  defaultAccount: undefined,<br>  
  defaultBlock: "latest",<br>  
  gasPrice: 1000000000,<br>  
  hashrate: 0,<br>  
  mining: false,<br>  
  pendingTransactions: [],<br>  
  protocolVersion: "0x41",<br>  
  syncing: false,<br>  
  call: function(),<br>  
  chainId: function(),<br>  
  contract: function(abi),<br>  
  estimateGas: function(),<br>  
  fillTransaction: function(),<br>  
  filter: function(options, callback, filterCreationErrorCallback),<br>  
  getAccounts: function(callback),<br>  
  getBalance: function(),<br>  
  getBlock: function(),<br>  
  getBlockByHash: function(),<br>  
  getBlockByNumber: function(),<br>  
  getBlockNumber: function(callback),<br>  
  getBlockTransactionCount: function(),<br>  
  getBlockUncleCount: function(),<br>  
  getCode: function(),<br>  
  getCoinbase: function(callback),<br>  
  getCompilers: function(),<br>  
  getGasPrice: function(callback),<br>  
  getHashrate: function(callback),<br>  
  getHeaderByHash: function(),<br>  
  getHeaderByNumber: function(),<br>  
  getMining: function(callback),<br>  
  getPendingTransactions: function(callback),<br>  
  getProof: function(),<br>  
  getProtocolVersion: function(callback),<br>  
  getRawTransaction: function(),<br>  
  getRawTransactionFromBlock: function(),<br>  
  getStorageAt: function(),<br>  
  getSyncing: function(callback),<br>  
  getTransaction: function(),<br>  
  getTransactionCount: function(),<br>  
  getTransactionFromBlock: function(),<br>  
  getTransactionReceipt: function(),<br>  
  getUncle: function(),<br>  
  getWork: function(),<br>  
  iban: function(iban),<br>  
  icapNamereg: function(),<br>  
  isSyncing: function(callback),<br>  
  namereg: function(),<br>  
  resend: function(),<br>  
  sendIBANTransaction: function(),<br>  
  sendRawTransaction: function(),<br>  
  sendTransaction: function(),<br>  
  sign: function(),<br>  
  signTransaction: function(),<br>  
  submitTransaction: function(),<br>  
  submitWork: function()<br>  
}<br>  

<br>  <b id="web3">
web3 </b> <br>  
{<br>  
  admin: {<br>  
    datadir: "/home/mecbar/develop/mecbar-foto/data",<br>  
    nodeInfo: {<br>  
      enode: "enode://0fb1f5700a7b33605ada829078078d0c556c337d96211a30a1654aaa9e28c857f 313f9b34803da76430fc17c7ee98722d764687d628aa ed32b8987b620847b63@127.0.0.1:30305",
      <br>   enr: "enr:-Jq4QP_GdHnJ_avNEGwYO-g1KsHFtTpHFX_88bSNzgtFeK0pGV6aHcserAxPNTxPOY X733O6RBv6_udO1S4IzYOy464Fg2V0aMrJhPxk7ASDEYwwgmlkgnY0gml whH8AAAGJc2VjcDI1NmsxoQMPsfVwCnszYFragpB4B40MVWwzfZYhGjCh UqqnijIV4N0Y3CCdmGDdWRwgnZh",
      <br>   id: "19e02ca82ce3ee76a63078723b5cd4cc4ca81dea2d1bbb1637c9b3b4c9e7046e",
      ip: "127.0.0.1",<br>  
      listenAddr: "[::]:30305",<br>  
      name: "Geth/v1.9.18-stable-f5382591/linux-amd64/go1.14.2",<br>  
      ports: {<br>  
        discovery: 30305,<br>  
        listener: 30305<br>  
      },<br>  
      protocols: {<br>  
        eth: {...}<br>  
      }<br>  
    },<br>  
    peers: [],<br>  
    addPeer: function(),<br>  
    addTrustedPeer: function(),<br>  
    clearHistory: function(),<br>  
    exportChain: function(),<br>  
    getDatadir: function(callback),<br>  
    getNodeInfo: function(callback),<br>  
    getPeers: function(callback),<br>  
    importChain: function(),<br>  
    removePeer: function(),<br>  
    removeTrustedPeer: function(),<br>  
    sleep: function(),<br>  
    sleepBlocks: function(),<br>  
    startRPC: function(),<br>  
    startWS: function(),<br>  
    stopRPC: function(),<br>  
    stopWS: function()<br>  
  },<br>  
  info: undefined,<br>  
  blockNetworkRead: function(),<br>  
  download: function(),<br>  
  get: function(),<br>  
  getHive: function(callback),<br>  
  getInfo: function(callback),<br>  
  modify: function(),<br>  
  put: function(),<br>  
  retrieve: function(),<br>  
  store: function(),<br>  
  swapEnabled: function(),<br>  
  syncEnabled: function(),<br>  
  upload: function()<br>  
},<br>  
currentProvider: {<br>  
  send: function(),<br>  
  sendAsync: function()<br>  
},<br> 

<b id="db">db: </b>{<br>  
  getHex: function(),<br>  
  getString: function(),<br>  
  putHex: function(),<br>  
  putString: function()<br>  
},<br>  
<b id="debug">debug:</b> {<br>  
  accountRange: function(),<br>  
  backtraceAt: function(),<br>  
  blockProfile: function(),<br>  
  chaindbCompact: function(),<br>  
  chaindbProperty: function(),<br>  
  cpuProfile: function(),<br>  
  dumpBlock: function(),<br>  
  freeOSMemory: function(),<br>  
  freezeClient: function(),<br>  
  gcStats: function(),<br>  
  getBadBlocks: function(),<br>  
  getBlockRlp: function(),<br>  
  getModifiedAccountsByHash: function(),<br>  
  getModifiedAccountsByNumber: function(),<br>  
  goTrace: function(),<br>  
  memStats: function(),<br>  
  mutexProfile: function(),<br>  
  preimage: function(),<br>  
  printBlock: function(),<br>  
  seedHash: function(),<br>  
  setBlockProfileRate: function(),<br>  
  setGCPercent: function(),<br>  
  setHead: function(),<br>  
  setMutexProfileFraction: function(),<br>  
  stacks: function(),<br>  
  standardTraceBadBlockToFile: function(),<br>  
  standardTraceBlockToFile: function(),<br>  
  startCPUProfile: function(),<br>  
  startGoTrace: function(),<br>  
  stopCPUProfile: function(),<br>  
  stopGoTrace: function(),<br>  
  storageRangeAt: function(),<br>  
  testSignCliqueBlock: function(),<br>  
  traceBadBlock: function(),<br>  
  traceBlock: function(),<br>  
  traceBlockByHash: function(),<br>  
  traceBlockByNumber: function(),<br>  
  traceBlockFromFile: function(),<br>  
  traceTransaction: function(),<br>  
  verbosity: function(),<br>  
  vmodule: function(),<br>  
  writeBlockProfile: function(),<br>  
  writeMemProfile: function(),<br>  
  writeMutexProfile: function()<br>  
},<br>  
<br>  


<b id="admin">
> admin  </b><br>  
{<br>  
  datadir: "/home/mecbar/develop/mecbar-foto/data",<br>  
  nodeInfo: {<br>  
    enode: "enode://0fb1f5700a7b33605ada829078078d0c556c337d96211a30a1654aaa9e28c857f313f9b34803da76 430fc17c7ee98722d764687d628aaed32b8987b620847b63@127.0.0.1:30305",
    <br>    enr: "enr:-Jq4QP_GdHnJ_avNEGwYO-g1KsHFtTpHFX_88bSNzgtFeK0pGV6aHcserAxPNTxPOYX733O6RBv6_ udO1S4IzYOy464Fg2V0aMrJhPxk7ASDEYwwgmlkgnY0gmlwhH8AAAGJc2Vjc DI1NmsxoQMPsfVwCnszYFragpB4B40MVWwzfZYhGjChZUqqnijIV4N0Y3CCdmGDdWRwgnZh",
    <br>    id: "19e02ca82ce3ee76a63078723b5cd4cc4ca81dea2d1bbb1637c9b3b4c9e7046e",
    <br>    ip: "127.0.0.1",
    <br>     listenAddr: "[::]:30305",
    <br>     name: "Geth/v1.9.18-stable-f5382591/linux-amd64/go1.14.2",
    <br>      ports: {
      <br>       discovery: 30305,
      <br>        listener: 30305
      <br>      },
      <br>      protocols: {
         <br>     eth: {
            <br>       config: {...},
            <br>        difficulty: 17179869184,
            <br>        genesis: "0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3",
            <br>        head: "0xd4e56740f876aef8c010b86a40d5f56745a118d0906a34e69aec8c0db1cb8fa3",
            <br>         network: 25
      }<br>  
    }<br>  
  },<br>  
  peers: [],<br>  
  addPeer: function(),<br>  
  addTrustedPeer: function(),<br>  
  clearHistory: function(),<br>  
  exportChain: function(),<br>  
  getDatadir: function(callback),<br>  
  getNodeInfo: function(callback),<br>  
  getPeers: function(callback),<br>  
  importChain: function(),<br>  
  removePeer: function(),<br>  
  removeTrustedPeer: function(),<br>  
  sleep: function(),<br>  
  sleepBlocks: function(),<br>  
  startRPC: function(),<br>  
  startWS: function(),<br>  
  stopRPC: function(),<br>  
  stopWS: function()<br>  
}<br>  

<br>  <b id="miner">
> miner </b><br>  
{<br>  
  getHashrate: function(),<br>  
  setEtherbase: function(),<br>  
  setExtra: function(),<br>  
  setGasPrice: function(),<br>  
  setRecommitInterval: function(),<br>  
  start: function(),<br>  
  stop: function()<br>  
}
</div>
<div class="tot">
Tramite il comando account possiamo definire una nuovo account o fare la lista degli account appertenti alla chain 
o modificare la password di un account o importare un account già definito all'interno della nostra chain. <br> 
<br>  
Vediamo questi comandi iniziando con il creare un nuovo account ma prima vediamo quali sono gli account già presenti.<br> 
</div>

<div id="account" class="boxxx">
   <br><br>
   <b>ACCONT LIST</b><br> <br>  
geth --datadir "./data" --networkid 25 --port 30305 --ipcdisable --http.corsdomain '*' --http.api="net,eth,web3,personal,admin,miner" --http.addr localhost  account list console
</div>
<div class="boxex">
   
   INFO [08-08|11:00:27.639] Maximum peer count                       ETH=50 LES=0 total=50
<br>              INFO [08-08|11:00:27.640] Smartcard socket not found, disabling    err="stat /run/pcscd/pcscd.comm: no such file or directory"
<br>             INFO [08-08|11:00:27.641] Set global gas cap                       cap=25000000
<br>              Account #0: {c9e54ccac280032fb89e1ca14607a952e5b9a84a} keystore:///home/mecbar/node1/data/keystore/UTC--2020-08-01T13-51-02.242478702Z--c9e54ccac280032fb89e1ca14607a952e5b9a84a
<br>  <br><br>           
 <b>ACCOUNT NEW</b><br>  
            
geth --datadir "./data" --networkid 25 --port 30305 --ipcdisable --http.corsdomain '*' --http.api="net,eth,web3,personal,admin,miner" --http.addr localhost  account new  console
<br>  INFO [08-08|11:02:51.817] Maximum peer count                       ETH=50 LES=0 total=50
<br>  INFO [08-08|11:02:51.817] Smartcard socket not found, disabling    err="stat /run/pcscd/pcscd.comm: no such file or directory"
<br>  Your new account is locked with a password. Please give a password. Do not forget this password.
<br>  password: 
<br>  Repeat password: 
<br>  
Your new key was generated<br>  
<br>  
<br>  Public address of the key:   0x97e908aa7Bc94B05D581DfE9B5e37F558c646654
<br>  ath of the secret key file: data/keystore/UTC--2020-08-08T09-03-03.363284578Z--97e908aa7bc94b05d581dfe9b5e37f558c646654
<br>  
<br>  - You can share your public address with anyone. Others need it to interact with you.
<br>  - You must NEVER share the secret key with anyone! The key controls access to your funds!
<br>  - You must BACKUP your key file! Without the key, it's impossible to access account funds!
<br>  - You must REMEMBER your password! Without the password, it's impossible to decrypt the key!
<br>  <br><br>
<b>ACCOUNT LIST</b><br>
<br>  geth --datadir "./data" --networkid 25 --port 30305 --ipcdisable --http.corsdomain '*' --http.api="net,eth,web3,personal,admin,miner" --http.addr localhost  account list console
<br>  INFO [08-08|11:04:51.122] Maximum peer count                       ETH=50 LES=0 total=50
<br>  INFO [08-08|11:04:51.122] Smartcard socket not found, disabling    err="stat /run/pcscd/pcscd.comm: no such file or directory"
<br>  INFO [08-08|11:04:51.123] Set global gas cap                       cap=25000000
<br>  Account #0: {c9e54ccac280032fb89e1ca14607a952e5b9a84a} keystore:///home/mecbar/node1/data/keystore/UTC--2020-08-01T13-51-02.242478702Z--c9e54ccac280032fb89e1ca14607a952e5b9a84a
<br>  Account #1: {97e908aa7bc94b05d581dfe9b5e37f558c646654} keystore:///home/mecbar/node1/data/keystore/UTC--2020-08-08T09-03-03.363284578Z--97e908aa7bc94b05d581dfe9b5e37f558c646654
<br>  <br><br>

<b>ACCOUNT UPDATE</b>  -- key file password  update la password di un account <br>  
<br>
<br>   geth --datadir "./data" --networkid 25 --port 30305 --ipcdisable --http.corsdomain '*' --http.api="net,eth,web3,personal,admin,miner" --http.addr localhost  account update 97e908aa7bc94b05d581dfe9b5e37f558c646654  console
<br>  INFO [08-08|11:07:52.293] Maximum peer count                       ETH=50 LES=0 total=50
<br>  INFO [08-08|11:07:52.293] Smartcard socket not found, disabling    err="stat /run/pcscd/pcscd.comm: no such file or directory"
<br>  INFO [08-08|11:07:52.294] Set global gas cap                       cap=25000000
<br>  Unlocking account 97e908aa7bc94b05d581dfe9b5e37f558c646654 | Attempt 1/3
<br>  Password: 
<br>  INFO [08-08|11:08:00.631] Unlocked account                         address=0x97e908aa7Bc94B05D581DfE9B5e37F558c646654
<br>  Please give a new password. Do not forget this password.
<br>  Password: 
<br>  Repeat password: 
<br>             
<br><br><br>
 <b>ACCOUNT IMPORT</b><br><br>
 
 <br>  geth account import --datadir /directory dove trovare key  ./key.prv
 <br>  The new account will be encrypted with a passphrase.
 <br>  Please enter a passphrase now.
 <br>  Passphrase:
 <br>  Repeat Passphrase:
 <br>  Address: { address importato }
</div>
<div class="tot">
Queste operazioni possono essere eseguite senza digitare le password ma inserendo le stesse in un file e passando il nome del file
</div>
<div class="boxex"> 
> eth.accounts<br>  
["0xc9e54ccac280032fb89e1ca14607a952e5b9a84a", "0x2ab6bd87a4c68d106824240dd9e6317c01070e08", "0x97e908aa7bc94b05d581dfe9b5e37f558c646654"]
</div>
<div class="tot">

Vediamo come eseguire una transazione tramite script indicando il mittente, il destinatario e la sooma 
entro un oggetto.
</div>
<div class="boxxx">
terzo = () => {<br>
sender = personal.listAccounts[0];<br>
receiver = personal.listAccounts[1];<br>
quota = web3.toWei(0.05,"ether");<br>
eth.sendTransaction({from:sender,to:receiver,value:quota}<br>
)<br>
}<br>
</div>
<div class="tot">
Con il comando sottostante eseguiamo lo script e sblocchiamo il primo account della lista
</div>
<div class="boxxx">
geth –datadir …. networkid 25 –exec "loadScript('./primo.js')"  unlock [0]<br>
<br>
<br>
Per unlock account per problemi inserire :<br>
--allow-insecure-unlock<br>
<br>
</div>

<div class="tot">
Vediamo ora i comandi per minare i nuovi blocchi  <br><br>
Mine :<br>  
--mine enable mine <br>  
--miner.threads   default:8<br>  
--etherbase   default: account[0]<br>  
--gasprice<br>  
--extradata  -- possibilità inserire dati extra nel block creato<br>  <br>  
Comandi in console<br> 
  miner.start()<br>  
  miner.stop()<br>  <br> 

  <b id="chi">
  Per vedere chi ha minato i blocchi precedenti ad un dato block in console si può utilizzare la seguente function 
</b>
  <div class="boxex">
> function minedBlocks(lastn, addr) {
   addrs = [];
   if (!addr) {
       addr = eth.coinbase
   }
   limit = eth.blockNumber - lastn
   for (i = eth.blockNumber; i >= limit; i--) {
       if (eth.getBlock(i).miner == addr) {
           addrs.push(i)
       }
   }
   return addrs
}

> minedBlocks(86, eth.coinbase)
</div>
<div class="boxex">
   [85, 84, 83, 82, 81, 80, 79, 78, 77, 76, 75, 74, 73, 72, 71, 70, 69, 68, 67, 66, 65, 64, 63, 62, 61, 60, 59, 58, 57, 56, 55, 54, 53, 52, 51, 50, 49, 48, 47, 46, 45, 44, 43, 42, 41, 40, 39, 38, 37, 36, 35, 34, 33, 32, 31, 30, 29, 28, 27, 26, 25, 24, 23, 22, 21, 20, 19, 18, 17, 16, 15, 14, 13, 12, 11, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1]


</div>
Per vedere il numero del blocco attuale <br>
eth.blockNumber <br><br>

eth.hashrate se ritorna valore > 0 sta minando altrimenti no. <br><br>
Comando per settare l'account abilitato ad essere il minatore che deve essere sbloccato(unlock).<br>
<br><br>
Per vedere il saldo di un account in questo caso specifico del minatore<br>
eth.getBalance(eth.coinbase).toNumber();<br><br>

Per settare il minatore <br>
miner.setEtherbase("address) <br> <br>
Per vedere il saldo in ether di un account
</div>

<div class="boxex">
> web3.fromWei(eth.getBalance(eth.coinbase), "ether") <br> <br>
 9.04625697166532776746648320380374280103671755200316906558262375061821325312e+56
   
</div>
<div class="tot">

CONSOLE :<br>
admin  personal  miner  txpool debug

<br>  
admin.nodeInfo<br>
</div>
<div class="boxex">
> admin.nodeInfo<br>  
{<br>  
  enode: "enode://691407be50aae792c4d52bfaa42f913e77280aa410f3ef1fad5e2 ce84c0aaabd1693de33c75e5f9d904bedc3a74f065a3e63f331d 1e006556fe723e54f369d51@127.0.0.1:30303",
  <br>   enr: "enr:-Je4QJ7T2254xicWAlkyNrsOQqwzd_Y_YR-xrjrd_a7qKdmfCSKWPG GwWb8uv-elToehaF997FcwH0h3XCanmn5mJxceg2V0aMfGhN0JU4CAg mlkgnY0gmlwhH8AAAGJc2VjcDI1NmsxoQNpFAe-UKrnksTVK_qkL5E-dygKpBDz7x-tXizoTAqqvYN0Y3CCdl-DdWRwgnZf",
  <br>    id: "177facbd7904233266f192e3c922656305d2f52af8dfe1a500ef1323a39a69bb",
  <br>   ip: "127.0.0.1",
  <br>    listenAddr: "[::]:30303",
  <br>   name: "Geth/v1.9.18-stable-f5382591/linux-amd64/go1.14.2",
  ports: {<br>  
    discovery: 30303,<br>  
    listener: 30303<br>  
  },<br>  
  protocols: {<br>  
    eth: {<br>  
      config: {<br>  
        byzantiumBlock: 0,<br>  
        chainId: 25,<br>  
        clique: {...},<br>  
        constantinopleBlock: 0,<br>  
        eip150Block: 0,<br>  
        eip150Hash: "0x0000000000000000000000000000000000000000000000000000000000000000",<br>  
        eip155Block: 0,<br>  
        eip158Block: 0,<br>  
        homesteadBlock: 0,<br>  
        istanbulBlock: 0,<br>  
        petersburgBlock: 0<br>  
      },<br>  
      difficulty: 3,<br>  
      genesis: "0x17d40999df5f149ebca5df7439ac6431a3569f99ef59bec89f93e41f226084ab",<br>  
      head: "0x090e5afeacd7fecc94f974e46604f51eafbd3b079c3023eaf0855b1ebc62553d",<br>  
      network: 25<br>  
    }<br>  
  }<br>  
}<br>  
<br>  
admin.peers<br>  
</div>
<div class="tot">
Per compilare gli Smart Contract creati con Solidity si può utilizzare Remix oppure 
compilarli con solc(prima va installato localmente) <br>  <br>  
--solc option per compiler solidity<br>  
--setSolc(‘path solidity compiler’)<br>  
<br>  
<b id="txpool">TX POOL </b>
<br> 
personal.listAccounts<br>  
personal.newAccount(‘password’)  //crea nuovo account <br>  
personal.importRawKey(keydata,paraphrase)<br>  
personal.unlockAccount("0xc9e54ccac280032fb89e1ca14607a952e5b9a84a"])<br>  
personal.sendTransaction(trx_object,’paraphrase’)<br>  
trx_object = from:addres to:address value in wei:1<br>  
<br>  
ogni account ha un unico nonce per transaction <br>  
- indica la sequenza delle transazioni di un account<br>  
<br>  
Dopo aver inviato la transazione con sendTransaction si può verificare la 
transaction pool per vedere le transazioni pendenti(pending POOL) e la Quequed POOL  
con le istruzioni seguenti:<br><br>
txpool.status<br>  
txpool.inspect<br>  
txpool.content<br>  
<br>  
Qui vediamo i comandi per vedere il numero di blocco attuale e poi i dati del blocco pendente 

eth.blockNumber



<div class="boxex">
   > txpool.inspect<br>  
   {<br>  
     pending: {<br>  
       0x1205577aD6834043992CA4bFd2439c54BBF47f99: {<br>  
         0: "contract creation: 0 wei + 100000 gas × 1000000000 wei"<br>  
       }<br>  
     },<br>  
     queued: {}<br>  
   }<br>  
   <br>   <br>  <br>   
> eth.getBlock('pending')<br>  
{<br>  
  difficulty: 2,<br>  
  extraData: "0xd883010912846765746888676f312e31342e32856c696e7578000000000000000",<br>  
  <br>  gasLimit: 4709181,<br>  
  gasUsed: 100000,<br>  
  hash: null,<br>  
  logsBloom: "0x000000000000000000000000000000000000000000000000000000000000000000000",
  miner: null,<br>  
  mixHash: "0x0000000000000000000000000000000000000000000000000000000000000000",<br>  
  nonce: null,<br>  
  number: 2,<br>  
  parentHash: "0x2f436694c9ada6e2c8d04a0c52b205c2044ecaf99127a6187829864ef82c94e5",<br>  
  receiptsRoot: "0x777f1c1c378807634128348e4f0eeca6a0e7f516ea411690ca04266323f671a4",<br>  
  sha3Uncles: "0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347",<br>  
  size: 1024,<br>  
  stateRoot: "0xcc0e10e6362f37be2c648304ad4f443525a14d7c0ad92e7472395ab69d285d7f",<br>  
  timestamp: 1596978215,<br>  
  totalDifficulty: 0,<br>  
  transactions: ["0x4095742701a2369bbfcdcbf33947f79914236f47b84f681fdb344a93c8881a5e"],<br>  
  transactionsRoot: "0x99d9fb5b2025672c7a0ce757d2f58474bf9d4efdc86066d685133682169e7c51",<br>  
  uncles: []<br>  
}<br>  
</div>
eth.pendingTransactions




<br> 
Per interagire con la blockchain si può utilizzare la libreria web3.js che ci permette 
tramite Javascript di utilizzare i comandi previsti in console <br>  
- per i numeri usa Bignumber library ma max 20 floating point per questo si usa l'unità di misura wei e non gli ether
<br>
Sono previste function sincrone ed asincrone e le callback function<br>
</div>  
<div class="boxex">
 web3.net.getPeerCount(function(error, result) {<br>  
      if (error) {<br>  
       ……<br>  
} else { …… }<br>  
}<br>  
<br>  
</div>
<div id="clique" class="tot">
<b>CLIQUE </b><br> 
Clique è un metodo per implementare il Proof of Autority per determinare quale account è autorizzato a minare i 
blocchi della blockchain per le reti private.<br>   
<br>  Vediamo i comandi principali :<br> 
clique.getSnapshotAtHash(blockHash)<br>  
clique.getSigners(blockNumber)<br>  
clique.proposals()<br>  
clique.propose(address, auth)<br>  
clique.status()<br>  
<br>  
<b id="web">
Finora abbiamo visto come collegarci con con il JSON-RPC ma possiamo utilizzare 
anche WebSocket con la defult port 8546 </b><br>  

</div>
<div class="boxxx">
geth --datadir "./data" --networkid 25 --port 30305 --ipcdisable --ws  --ws.api="net,eth,web3,personal,admin,miner" --ws.port 8546   console
</div>
<div class="boxex">
INFO [08-08|21:45:03.036] Started P2P networking            <br>        self=enode://018fc0979d4330cf1d0cf666e69dde441d584654f57b4f63deaf436eb729032251055153 
f9cd31313ad01b5909b444e8eab90f8d6a0a96f40a1f0f336790b8f2@127.0.0.1:30305
<br>  INFO [08-08|21:45:03.039] WebSocket endpoint opened                url=ws://127.0.0.1:8545
<br>  INFO [08-08|21:45:03.094] Etherbase automatically configured       address=0x707F3592F561be42A8583a2D42F376F07F4F03bc
<br>  Welcome to the Geth JavaScript console!
<br>  
instance: Geth/v1.9.18-stable-f5382591/linux-amd64/go1.14.2<br>  
coinbase: 0x707f3592f561be42a8583a2d42f376f07f4f03bc<br>  
at block: 0 (Sat Aug 01 2020 15:55:43 GMT+0200 (CEST))<br>  
 datadir: /home/mecbar/CHAIN25/data<br>  
 modules: admin:1.0 clique:1.0 debug:1.0 eth:1.0 miner:1.0 net:1.0 personal:1.0 rpc:1.0 txpool:1.0 web3:1.0
 <br>  
 > debug<br>  
 {<br>  
   accountRange: function(),<br>  
   backtraceAt: function(),<br>  
   blockProfile: function(),<br>  
   chaindbCompact: function(),<br>  
   chaindbProperty: function(),<br>  
   cpuProfile: function(),<br>  
   dumpBlock: function(),<br>  
   freeOSMemory: function(),<br>  
   freezeClient: function(),<br>  
   gcStats: function(),<br>  
   getBadBlocks: function(),<br>  
   getBlockRlp: function(),<br>  
   getModifiedAccountsByHash: function(),<br>  
   getModifiedAccountsByNumber: function(),<br>  
   goTrace: function(),<br>  
   memStats: function(),<br>  
   mutexProfile: function(),<br>  
   preimage: function(),<br>  
   printBlock: function(),<br>  
   seedHash: function(),<br>  
   setBlockProfileRate: function(),<br>  
   setGCPercent: function(),<br>  
   setHead: function(),<br>  
   setMutexProfileFraction: function(),<br>  
   stacks: function(),<br>  
   standardTraceBadBlockToFile: function(),<br>  
   standardTraceBlockToFile: function(),<br>  
   startCPUProfile: function(),<br>  
   startGoTrace: function(),<br>  
   stopCPUProfile: function(),<br>  
   stopGoTrace: function(),<br>  
   storageRangeAt: function(),<br>  
   testSignCliqueBlock: function(),<br>  
   traceBadBlock: function(),<br>  
   traceBlock: function(),<br>  
   traceBlockByHash: function(),<br>  
   traceBlockByNumber: function(),<br>  
   traceBlockFromFile: function(),<br>  
   traceTransaction: function(),<br>  
   verbosity: function(),<br>  
   vmodule: function(),<br>  
   writeBlockProfile: function(),<br>  
   writeMemProfile: function(),<br>  
   writeMutexProfile: function()<br>  
 }<br>  
 
</div>

<div id="sm" class="tot">
INSERIMENTO SMART CONTRACT NELLA BLOCKCHAIN  
<br>  

Iniziamo con la scrittura del sottostante programma in Solidity nel file primo.sol <br>


primo.sol<br>  
pragma solidity >=0.4.13;<br>  <br>  

contract primo {<br>  
  function operazioni(uint _a, uint _b) public pure returns (uint o_somma, uint o_prodotto) {<br>  
    o_somma = _a + _b;<br>  
    o_prodotto = _a * _b;<br>  
  }<br>  
  function moltiplicazione(uint _a, uint _b) public pure returns (uint) {<br>  
    return _a * _b;<br>  
  }<br>  
}<br>  

<br>  
Compiliamo il programma con solc:<br>  
<br>  
$ solc -o . --bin --abi primo.sol<br>  
e vediamo che il compilatore ha generato primo.abi e  primo.bin, sotto il contenuto di primo.abi <br>
<br>

Il file .abi contiene l'interfacaccia del contract mentre il file .bin 
contiene il codice compilato. Per inserire il contract in geth manualmente ma anche tramite javascript
<br>
<br>  
Nel nostro esempio compiliamo il programma solidity e creiamo in output uno script Javascript 
che inseriremo nalla chain cno il comado loadScript come vedremo nei comandi sottostanti 
<br>  


<br>

per essere eseguito deve essere inserito il programma compilato da un account 
sbloccato e poi il blocco dove è inerito il contratto deve essere minato. <br>
<br>
personal.unlockAccount(eth.coinbase)<br>
<br>

Ora compiliamo il programma con la creazione dello script primoContract.js <br>  
echo "var primoContract=`solc --optimize --combined-json abi,bin,interface primo.sol`" > primoContract.js<br>  





<br>
<br>
carichiamo lo script nella chain 
</div>
<div class="boxxx">
> loadScript("contract/primoContract.js")<br><br>
e vediamo il risultato <br><br>
> primoContract
</div>
<div class="boxex">
{<br>
  contracts: {<br>
    primo.sol:primo: {<br>
      abi: "[{\"constant\":true,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_a\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_b\",\"type\":\"uint256\"}],\"name\":\"moltiplicazione\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\" :\"uint256\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"},{\"constant\":true,\"inputs\":[{\"internalType\":\"uint256\",\"name\":\ "_a\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_b\",\"type\":\"uint256\"}],\"name\":\"operazioni\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"o_somma\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"o_prodotto\",\"type\":\"uint256\"}],\"payable\":false,\"stateMutability\":\"pure\",\"type\":\"function\"}]",
      <br> bin: "608060405234801561001057600080fd5b5060e48061001f6000396000f3fe608  ...032"
      <br>}<br>
  },<br>
  version: "0.5.16+commit.9c3226ce.Linux.g++"<br>
}
</div>
<div class="tot"> 
Dopo aver inserito lo script passiamo ad inserire il file abi 
</div>
<div class="boxxx">
>  primo  = web3.eth.contract(JSON.parse(primoContract.contracts["primo.sol:primo"].abi))
</div>
<div class="boxex">


{<br>
  abi: [{<br>
      constant: true,<br>
      inputs: [{...}, {...}],<br>
      name: "moltiplicazione",<br>
      outputs: [{...}],<br>
      payable: false,<br>
      stateMutability: "pure",<br>
      type: "function"<br>
  }, {<br>
      constant: true,<br>
      inputs: [{...}, {...}],<br>
      name: "operazioni",<br>
      outputs: [{...}, {...}],<br>
      payable: false,<br>
      stateMutability: "pure",<br>
      type: "function"<br>
  }],<br>
  eth: {<br>
    accounts: ["0xa960a0c1d3affca95b41c6e30ef0ecf9a5da98fe", "0x89ba3bc13225c5afbfcf2d40c9bc134040e35dae"],
    <br> blockNumber: 94,<br>
    coinbase: "0xa960a0c1d3affca95b41c6e30ef0ecf9a5da98fe",<br>
    compile: {<br>
      lll: function(),<br>
      serpent: function(),<br>
      solidity: function()<br>
    },<br>
    defaultAccount: undefined,<br>
    defaultBlock: "latest",<br>
    gasPrice: 1000000000,<br>
    hashrate: 0,<br>
    mining: false,<br>
    pendingTransactions: [{<br>
        blockHash: null,<br>
        blockNumber: null,<br>
        from: "0xa960a0c1d3affca95b41c6e30ef0ecf9a5da98fe",<br>
        gas: 100000,<br>
        gasPrice: 1000000000,<br>
        hash: "0xbf94c2d861481f1d575473b7bb2cbb93166edb0725d7cac2f36317ea8572b8c5",<br>
        input: "0x608060405234801561001057600080fd5b5061012680610020....30005100032",
        <br>nonce: 1,<br>
        r: "0x783dcb48a96697f6e9f9a79ae6a6a71c37473373599b1c33c19ec23b525e8792",<br>
        s: "0xb5156db19ff296bad82084a2e82db22757de1a46b43779b04687aa3cb23036d",<br>
        to: null,<br>
        transactionIndex: null,<br>
        v: "0x91",<br>
        value: 0<br>
    }],<br>
    protocolVersion: "0x41",<br>
    syncing: false,<br>
    call: function(),<br>
    chainId: function(),<br>
    contract: function(abi),<br>
    estimateGas: function(),<br>
    fillTransaction: function(),<br>
    filter: function(options, callback, filterCreationErrorCallback),<br>
    getAccounts: function(callback),<br>
    getBalance: function(),<br>
    getBlock: function(),<br>
    getBlockByHash: function(),<br>
    getBlockByNumber: function(),<br>
    getBlockNumber: function(callback),<br>
    getBlockTransactionCount: function(),<br>
    getBlockUncleCount: function(),<br>
    getCode: function(),<br>
    getCoinbase: function(callback),<br>
    getCompilers: function(),<br>
    getGasPrice: function(callback),<br>
    getHashrate: function(callback),<br>
    getHeaderByHash: function(),<br>
    getHeaderByNumber: function(),<br>
    getMining: function(callback),<br>
    getPendingTransactions: function(callback),<br>
    getProof: function(),<br>
    getProtocolVersion: function(callback),<br>
    getRawTransaction: function(),<br>
    getRawTransactionFromBlock: function(),<br>
    getStorageAt: function(),<br>
    getSyncing: function(callback),<br>
    getTransaction: function(),<br>
    getTransactionCount: function(),<br>
    getTransactionFromBlock: function(),<br>
    getTransactionReceipt: function(),<br>
    getUncle: function(),<br>
    getWork: function(),<br>
    iban: function(iban),<br>
    icapNamereg: function(),<br>
    isSyncing: function(callback),<br>
    namereg: function(),<br>
    resend: function(),<br>
    sendIBANTransaction: function(),<br>
    sendRawTransaction: function(),<br>
    sendTransaction: function(),<br>
    sign: function(),<br>
    signTransaction: function(),<br>
    submitTransaction: function(),<br>
    submitWork: function()<br>
  },<br>
  at: function(address, callback),<br>
  getData: function(),<br>
  new: function()<br>
}<br>

</div>
<div class="tot"> 
Prepariamo il file bin con l'aggiunta di 0x all'inizio poi valutiamo quanto gas è necessario 
per inserire il contratto nella chain e vediamo che si necessita di gas > 115000 e successivamente
inseriamo il contratto bin inserendo il file bin, il gas necessario e l'account che effettua l'inserimento che 
ricordiamo deve essere sbloccato   <br>

</div>
<div class="boxxx"> 
> primoBin = "0x" + primoContract.contracts["primo.sol:primo"].bin<br>
<br>

> eth.estimateGas({data: primoBin })<br>
<br>
> primoI = primo.new({data: primoBin ,gas: 130000, from: eth.coinbase})
</div>

<div class="boxex"> 
gas stimato :  115415<br>
<br>

INFO [08-09|19:50:11.256] Submitted contract creation              fullhash=0x65a0e26484c0ace99c498313f151db8211eb6e399ff26cfd84ff4214a38198d1 contract=0x90B045daeA6D67CC610FfD75ED0B350C1162543A<br>
{<br>
  abi: [{<br>
      constant: true,<br>
      inputs: [{...}, {...}],<br>
      name: "moltiplicazione",<br>
      outputs: [{...}],<br>
      payable: false,<br>
      stateMutability: "pure",<br>
      type: "function"<br>
  }, {<br>
      constant: true,<br>
      inputs: [{...}, {...}],<br>
      name: "operazioni",<br>
      outputs: [{...}, {...}],<br>
      payable: false,<br>
      stateMutability: "pure",<br>
      type: "function"<br>
  }],<br>
  address: undefined,<br>
  transactionHash: "0x65a0e26484c0ace99c498313f151db8211eb6e399ff26cfd84ff4214a38198d1"<br>
}<br>

</div>
<div class="tot">
Da notare che il l'operazione non ha ancora assegnato un address che riceverà dopo che il blocco verrò minato. 
Per cui ora faremi partire il mining vediamo il contratto che riceve l'address e poi fermiamo il mining
</div>
<div class="boxex">

miner.start() <br><br>


INFO [08-09|19:51:08.162] Commit new mining work                   number=95 sealhash="7fe2c3…68985d" uncles=0 txs=0 gas=0      fees=0      elapsed="227.387µs"
<br>INFO [08-09|19:51:08.163] Commit new mining work                   number=95 sealhash="46fc80…f851fb" uncles=0 txs=2 gas=215415 fees=0.000215415 elapsed="875.409µs"
<br>INFO [08-09|19:51:08.602] Successfully sealed new block            number=95 sealhash="46fc80…f851fb" hash="0aa75c…9f6d40" elapsed=439.6
<br>primoI <br>

{<br>
   abi: [{<br>
       constant: true,<br>
       inputs: [{...}, {...}],<br>
       name: "moltiplicazione",<br>
       outputs: [{...}],<br>
       payable: false,<br>
       stateMutability: "pure",<br>
       type: "function"<br>
   }, {<br>
       constant: true,<br>
       inputs: [{...}, {...}],<br>
       name: "operazioni",<br>
       outputs: [{...}, {...}],<br>
       payable: false,<br>
       stateMutability: "pure",<br>
       type: "function"<br>
   }],<br>
   address: "0x90b045daea6d67cc610ffd75ed0b350c1162543a",<br>
   transactionHash: "0x65a0e26484c0ace99c498313f151db8211eb6e399ff26cfd84ff4214a38198d1",<br>
   allEvents: function(),<br>
   moltiplicazione: function(),<br>
   operazioni: function()<br>
 }<br>

 <br>

 miner.stop()<br>
 <br>
</div>
<div class="tot">
Ora possiamo eseguire le function previste dallo Smart Contract e cioè operazioni con 
la somma e la moltiplicazione e la moltiplicazione diretta
</div>
<div class="boxex">
primoI.moltiplicazione.call(3,5) <br>
> primoI.moltiplicazione.call(3,5) <br>
15 <br>
<br>
> primoI.operazioni.call(5,5) <br>
[10, 25] <br>

</div>
<div class="tot">
Comando per aprire console chain su network id 55 con mining ed inserimento 
smart contract ed esecuzione dello stesso in console  </div>
<div class="boxex">
geth --datadir "./data" --networkid 55  --unlock  a960a0c1d3affca95b41c6e30ef0ecf9a5da98fe --password password.txt --allow-insecure-unlock  --mine --minerthreads=1   console 
</div>
 

 
